language: objective-c
osx_image: xcode7.2
script:
- xctool -workspace $APP_NAME.xcworkspace -scheme $APP_NAME -sdk iphoneos  -configuration
  Release OBJROOT=$PWD/build   SYMROOT=$PWD/build CODE_SIGN_IDENTITY="$DEVELOPER_NAME"
  ONLY_ACTIVE_ARCH=NO
before_script:
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/profile/$PROFILE_NAME.mobileprovision.enc
  -d -a -out scripts/profile/$PROFILE_NAME.mobileprovision
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/dist.cer.enc -d -a
  -out scripts/certs/dist.cer
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/dist.p12.enc -d -a
  -out scripts/certs/dist.p12
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/aps.cer.enc -d -a
  -out scripts/certs/pas.cer
- ./scripts/add-key.sh
after_success:
- ./scripts/sign-and-upload.sh
after_script:
- ./scripts/remove-key.sh
env:
  global:
  - APP_NAME="CavyLifeBand2"
  - 'DEVELOPER_NAME="iPhone Distribution: Hangzhou Cavy Technology Co., Ltd."'
  - PROFILE_NAME="CavyLifeBand2"
  - secure: ID0JLCWHnQqIepnMN8wVk8VfZ/43+CJZU6FLbkedc3/wB2Rd/8jAcugLqalG0Y2+OOFto6tP1VS/7wbYrFFl9kDlOk0jlicxxBdptEd5xCFOn2WohMLhPpFBa8j1aDGc1DcpJRjUM0inNbD8RVKSUrBO+xVAPCOhpXe1ktzaUE1AC6r11s3kfWz/xIEl3Ny7u+hAfcReCSSR/m6vswtmMoP8FAUSLVaKNMGhhD/na6t04OoEA9Hg3w7GgsNWfnznwedBEVXog6o8kjIC4mzpHqbt4BI4BYOOkELNFzRSBckTFRAfHpuB56/gEUNolcUxE0tepgGYPhD3tbxSpoFFqmuXMoECN1/fyDxM8g8PkaL6SHCJKIlTnU7KfI7Zng7cm/szWRnYtRi8mPePpGNCYH4nCLFk/UuFmFcL11FuzvLvjxcemZ0N/yH0EFZlHqjtAejQH6jkaMyAuy9e90Qzgr9U0yCGzNmUyJgFVe9XEiGXd2RwXZ4hdGsbQLJaHx/1VMb7yBF9CQyHew30bBjPaWrBvW3XImgZ1E0PVHVcP/AZQGQiCr3Q1eq+o8vWe30JAFJe6nZO2SXELvAeK+Ea+5/sfdjldbsp503rOLWGydXMZWkrViXs6m8fV4H16AOGlgLfCisBXXuRmEJy3FuWiBsf6xUNqvoln7lnhPZafqs=
  - secure: f4yoYPFA2I3gxQGqFtMw8bmwdruVtJUDutQToJmPXk9dwb65bgWCK4ETV+j05UysZiPDHoOj99dBzDNCTA6uh/srmAzUb4K3fde2v2KNMI8ZG+H59WugT3bdGPYUm8SmD46CDkNp+ia6L72DT7w15uxbxY90HUrPh1Z8PVijP4VXD6Amq9gVEG0ELfKoQdUK1m3ZesVaCGpa+FCWZeKN6cZdotY5+xnoNmuei54Rggss4VA1Ig51olovl+sJXw9jrljdFgTQ8eRs4zO6TDBBiFQM/l7QkzLqOWd1U39izgSJPbl8dTTck8xsvZm+A7BjIZPiGM1g1wcy2pgiXDWw7o1ZACyfTJzenUtf3bn8ZWz5Vfy1Ek9vC0vNEd0atLcNAlUxdlbNFNV4CXoWAQixOxRx4q70BpuvP/ZJO0pGxPrmVTz2ID92hmQ4GJ7WGjk/MlBUm2gceuvxErColaEZN1RDv9hBnR9wU0C87PEODJqDca5eHonQ4ie4hV1biNMysYwMjZlZNkt5/zCJGe9X+Guuw/+DxPSmfr+bRtgWnO+BsHkQYTvMF3Xm4dYZVrKjzLAOlwVq2Z0FIogO7kLOPC3NGfW+uCC8WHeFMZb2BOSRWKBtJTE8/OVdP2I02zBcC2djWN1MVIqwsCnyw5bgm4foeBEjbc9dtaH6bTjkXcE=
  - secure: GW6G13b6OCAeP2foBTyZWPw1OEUUetVH7X4+ty/ktbns0zvoQgn1IDxzS15U8SweqUtCXdraovYfFWB/Xef31ocfVlR7q1ZBFWi0ez+uPt59gxTve6r4oXSkrgVJAgoa77BVcaWSyp1RX0bgm5SEOCPUd+VIUbiojNyaByagntgm5d6n1Wl/jJmMB5ZUpWwjf60Vn5QmeP8Gpy31LBK+3/Mnom5BcuSaxeKV3aGip5pHAqi7zd7EoXPLjVdZS8t4+F3pbBb4QmffCT8vMjjvnRyfWEk28fsuD+a0pNIIU5Et7xTxPuz1nA0AVe+ZIe/6Bblku+yS6F5+I2Yj2R+BFvm0Uvs2xUUUykuJC92Y7QWqyOfjQw/USiovOs7RvJ4Hp4YSt7Rlu8/EsWXhTDS6QtZD5lchC00IU65qgkgDua2puoaD4L2LeQzU0cImEoOZ8A1QbPAhtxaoza7iv9ho2FLajk9yj4+7INHn+jbECsFt2A1TCzleQAn0LicGHnmNJQT6KXFktnb2r9NopFjhIqyWkoryKKUUXB2EY4sXydsIEkQ1G/2fzbwi4Ti2HmNi+2Qy3OD+espfg2Ra47fuZXG5O8UL0zG6Sy5+JNtzPBq4xOkrUTSc1oRwzp5cPDtZ0Ij5J6219rETpbXIRS9aJc7uZGiY8Op5hobZR8oviMc=
  - secure: M0T1uU4A1zS8LC2zFndxtHwlGVnody2CN9dajBqoWlDr04EPFxSJjGr/g/V+fppiko7+7nxiTrbAO1EB8qzax84MPkBbwRekvX641fiAyFN+U+vtHzYr7rz/fxbUpznc2cdRWcNo0XHNkGvRhKlF4rbuRYR+QpmRX4t+vsNQMZAATG3NO4Eum6Rp5Z1uX6WOlEEFkC1G9E/TYRB2A6+sOuWuU7TsJDnX2qnbSNcYNVt7vk4dgAKcTInAQxnXLaEQdzHDE3E7IXJDUO7Bf8wQnf/gzcmka2moUJCi29LRXL70gKCKHytjoxm8Rpc4hfRmOuGRXg8pPmJa7DSeGlJfe5vKx65rlHphHBUcLCNdvC3eDW7N4VQ3qhbg8MShX5twBldFbGKy/vHh+7SoOAXIRFFowDQGleWdBPDWhy2lyCm7Rjctb8pFOXd8pWDvcj29IzVuhHErOo2fVC/BC3ZBomFSQVaaAqLo4Th5T8ycwm4u39VoUhtBtF3AADRZMB/hnRFpCxlL3rV330bnL+KVjCCyg5GfGKJa9YQ0Lej7y8Nv2zxm4O/QUsXaoF1TKS6I+wLZDpmBVRccnijs7+P8odIJuyPxyKDHcTyMUQZtyPGwK5a2GAutb4f80UZlwlDsEZJ8nkW2mrbg2Ypgsa9+GpzsL6IE8rnML3JvnA94kIc=
